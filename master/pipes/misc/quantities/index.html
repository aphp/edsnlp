<!DOCTYPE html>
<html class="no-js" lang="en"> <head><meta charset="utf-8"/><meta content="width=device-width,initial-scale=1" name="viewport"/><link href="../dates/" rel="prev"/><link href="../consultation-dates/" rel="next"/><link href="../../../assets/logo/edsnlp.svg" rel="icon"/><meta content="mkdocs-1.6.1, mkdocs-material-9.2.8" name="generator"/><title>Quantities - EDS-NLP</title><link href="../../../assets/stylesheets/main.046329b4.min.css" rel="stylesheet"/><link href="../../../assets/stylesheets/palette.85d0ee34.min.css" rel="stylesheet"/><link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/><link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link href="../../../assets/_mkdocstrings.css" rel="stylesheet"/><link href="../../../override.css" rel="stylesheet"/><link href="../../../assets/stylesheets/extra.css" rel="stylesheet"/><link href="../../../clickable-code.css" rel="stylesheet"/><link href="../../../cards.css" rel="stylesheet"/><link href="../../../pret.css" rel="stylesheet"/><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body data-md-color-accent="indigo" data-md-color-primary="indigo" data-md-color-scheme="default" dir="ltr"> <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/> <input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/> <label class="md-overlay" for="__drawer"></label> <div data-md-component="skip"> <a class="md-skip" href="#edsnlp.pipes.misc.quantities.factory.create_component"> Skip to content </a> </div> <div data-md-component="announce"> <aside class="md-banner"> <div class="md-banner__inner md-grid md-typeset"> <button aria-label="Don't show this again" class="md-banner__button md-icon"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg> </button> Check out the new <a href="../../../tutorials/training-span-classifier">span classifier training tutorial</a> ! </div> <script>var content,el=document.querySelector("[data-md-component=announce]");el&&(content=el.querySelector(".md-typeset"),__md_hash(content.innerHTML)===__md_get("__announce")&&(el.hidden=!0))</script> </aside> </div> <div data-md-color-scheme="default" data-md-component="outdated" hidden=""> </div> <header class="md-header md-header--shadow" data-md-component="header"> <nav aria-label="Header" class="md-header__inner md-grid"> <a aria-label="EDS-NLP" class="md-header__button md-logo" data-md-component="logo" href="../../.." title="EDS-NLP"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg> </a> <label class="md-header__button md-icon" for="__drawer"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg> </label> <div class="md-header__title" data-md-component="header-title"> <div class="md-header__ellipsis"> <div class="md-header__topic"> <span class="md-ellipsis"> EDS-NLP </span> </div> <div class="md-header__topic" data-md-component="header-topic"> <span class="md-ellipsis"> Quantities </span> </div> </div> </div> <form class="md-header__option" data-md-component="palette"> <input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="" data-md-color-primary="indigo" data-md-color-scheme="default" id="__palette_1" name="__palette" type="radio"/> <label class="md-header__button md-icon" for="__palette_2" hidden="" title="Switch to dark mode"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"></path></svg> </label> <input aria-label="Switch to light mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="" data-md-color-primary="indigo" data-md-color-scheme="slate" id="__palette_2" name="__palette" type="radio"/> <label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to light mode"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"></path></svg> </label> </form> <label class="md-header__button md-icon" for="__search"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg> </label> <div class="md-search" data-md-component="search" role="dialog"> <label class="md-search__overlay" for="__search"></label> <div class="md-search__inner" role="search"> <form class="md-search__form" name="search"> <input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/> <label class="md-search__icon md-icon" for="__search"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg> </label> <nav aria-label="Search" class="md-search__options"> <button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg> </button> </nav> </form> <div class="md-search__output"> <div class="md-search__scrollwrap" data-md-scrollfix=""> <div class="md-search-result" data-md-component="search-result"> <div class="md-search-result__meta"> Initializing search </div> <ol class="md-search-result__list" role="presentation"></ol> </div> </div> </div> </div> </div> <div class="md-header__source"> <a class="md-source" data-md-component="source" href="https://github.com/aphp/edsnlp" title="Go to repository"> <div class="md-source__icon md-icon"> <svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg> </div> <div class="md-source__repository"> aphp/edsnlp </div> </a> </div> </nav> </header> <div class="md-container" data-md-component="container"> <main class="md-main" data-md-component="main"> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation"> <div class="md-sidebar__scrollwrap"> <div class="md-sidebar__inner"> <nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0"> <label class="md-nav__title" for="__drawer"> <a aria-label="EDS-NLP" class="md-nav__button md-logo" data-md-component="logo" href="../../.." title="EDS-NLP"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg> </a> EDS-NLP </label> <div class="md-nav__source"> <a class="md-source" data-md-component="source" href="https://github.com/aphp/edsnlp" title="Go to repository"> <div class="md-source__icon md-icon"> <svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg> </div> <div class="md-source__repository"> aphp/edsnlp </div> </a> </div> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../.."> <span class="md-ellipsis"> Getting started </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="https://aphp.github.io/edsnlp/demo" target="_blank"> <span class="md-ellipsis"> Demo </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a class="md-nav__link" href="../../../tutorials/"> <span class="md-ellipsis"> Tutorials </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input checked="" class="md-nav__toggle md-toggle" id="__nav_4" type="checkbox"/> <div class="md-nav__link md-nav__container"> <a class="md-nav__link" href="../../"> <span class="md-ellipsis"> Pipes </span> </a> <label class="md-nav__link" for="__nav_4"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-expanded="true" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1"> <label class="md-nav__title" for="__nav_4"> <span class="md-nav__icon md-icon"></span> Pipes </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../"> <span class="md-ellipsis"> Overview </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a class="md-nav__link" href="../../core/"> <span class="md-ellipsis"> Core Pipelines </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a class="md-nav__link" href="../../qualifiers/"> <span class="md-ellipsis"> Qualifiers </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input checked="" class="md-nav__toggle md-toggle" id="__nav_4_5" type="checkbox"/> <div class="md-nav__link md-nav__container"> <a class="md-nav__link" href="../"> <span class="md-ellipsis"> Miscellaneous </span> </a> <label class="md-nav__link" for="__nav_4_5"> <span class="md-nav__icon md-icon"></span> </label> </div> <nav aria-expanded="true" aria-labelledby="__nav_4_5_label" class="md-nav" data-md-level="2"> <label class="md-nav__title" for="__nav_4_5"> <span class="md-nav__icon md-icon"></span> Miscellaneous </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../"> <span class="md-ellipsis"> Overview </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../dates/"> <span class="md-ellipsis"> Dates </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/> <label class="md-nav__link md-nav__link--active" for="__toc"> <span class="md-ellipsis"> Quantities </span> <span class="md-nav__icon md-icon"></span> </label> <a class="md-nav__link md-nav__link--active" href="./"> <span class="md-ellipsis"> Quantities </span> </a> <nav aria-label="Table of contents" class="md-nav md-nav--secondary"> <label class="md-nav__title" for="__toc"> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="#edsnlp.pipes.misc.quantities.factory.create_component--examples"> Examples </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#edsnlp.pipes.misc.quantities.factory.create_component--parameters"> Parameters </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../consultation-dates/"> <span class="md-ellipsis"> Consultation dates </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../sections/"> <span class="md-ellipsis"> Sections </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../reason/"> <span class="md-ellipsis"> Reasons </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../tables/"> <span class="md-ellipsis"> Tables </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../split/"> <span class="md-ellipsis"> Split </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../explode/"> <span class="md-ellipsis"> Explode </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a class="md-nav__link" href="../../ner/"> <span class="md-ellipsis"> Named Entity Recognition </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a class="md-nav__link" href="../../trainable/"> <span class="md-ellipsis"> Trainable components </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../tokenizers/"> <span class="md-ellipsis"> Tokenizers </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a class="md-nav__link" href="../../../data/"> <span class="md-ellipsis"> Data Connectors </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a class="md-nav__link" href="../../../training/training-api/"> <span class="md-ellipsis"> Training </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a class="md-nav__link" href="../../../concepts/pipeline/"> <span class="md-ellipsis"> Concepts </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a class="md-nav__link" href="../../../metrics/"> <span class="md-ellipsis"> Metrics </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a class="md-nav__link" href="../../../utilities/"> <span class="md-ellipsis"> Utilities </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../.."> <span class="md-ellipsis"> Code Reference </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../contributing/"> <span class="md-ellipsis"> Contributing to EDS-NLP </span> </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../../changelog/"> <span class="md-ellipsis"> Changelog </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc"> <div class="md-sidebar__scrollwrap"> <div class="md-sidebar__inner"> <nav aria-label="Table of contents" class="md-nav md-nav--secondary"> <label class="md-nav__title" for="__toc"> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="#edsnlp.pipes.misc.quantities.factory.create_component--examples"> Examples </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#edsnlp.pipes.misc.quantities.factory.create_component--parameters"> Parameters </a> </li> </ul> </nav> </div> </div> </div> <div class="md-content" data-md-component="content"> <article class="md-content__inner md-typeset"> <h1 class="sourced-heading" id="edsnlp.pipes.misc.quantities.factory.create_component">Quantities<span class="sourced-heading-spacer"></span><a href="https///github.com/aphp/edsnlp/blob/9e6cce0d2/edsnlp/pipes/misc/quantities/quantities.py#L293" target="_blank">[source]</a></h1> <div class="doc doc-object doc-attribute"> <div class="doc doc-contents first"> <p>The <code><a href="#edsnlp.pipes.misc.quantities.factory.create_component">eds.quantities</a></code> matcher detects and normalizes numerical quantities within a medical document.</p> <div class="admonition warning"> <p class="admonition-title">Warning</p> <p>The <code>quantities</code> pipeline is still in active development and has not been rigorously validated. If you come across a quantity expression that goes undetected, please file an issue !</p> </div> <details class="pipe-definition" open=""> <summary>Pipe definition</summary> <div class="highlight"><pre><span></span><code><span class="n">text</span> <span class="o">=</span> <span class="s2">"""Poids : 65. Taille : 1.75</span>
<span class="s2">          On mesure ... à 3mmol/l ; pression : 100mPa-110mPa.</span>
<span class="s2">          Acte réalisé par ... à 12h13"""</span>
</code></pre></div> <div class="tabbed-set tabbed-alternate" data-tabs="1:3"><input checked="checked" id="edsnlp.pipes.misc.quantities.factory.create_component--all-quantities" name="edsnlp.pipes.misc.quantities.factory.create_component--__tabbed_1" type="radio"/><input id="edsnlp.pipes.misc.quantities.factory.create_component--custom-quantities" name="edsnlp.pipes.misc.quantities.factory.create_component--__tabbed_1" type="radio"/><input id="edsnlp.pipes.misc.quantities.factory.create_component--predefined-quantities" name="edsnlp.pipes.misc.quantities.factory.create_component--__tabbed_1" type="radio"/><div class="tabbed-labels"><label for="edsnlp.pipes.misc.quantities.factory.create_component--all-quantities">All quantities</label><label for="edsnlp.pipes.misc.quantities.factory.create_component--custom-quantities">Custom quantities</label><label for="edsnlp.pipes.misc.quantities.factory.create_component--predefined-quantities">Predefined quantities</label></div> <div class="tabbed-content"> <div class="tabbed-block"> <div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">edsnlp</span>

<span class="n">nlp</span> <span class="o">=</span> <span class="n">edsnlp</span><span class="o">.</span><span class="n">blank</span><span class="p">(</span><span class="s2">"eds"</span><span class="p">)</span>
<span class="n">nlp</span><span class="o">.</span><span class="n">add_pipe</span><span class="p">(</span><span class="s2">"<a href="../../core/sentences/#edsnlp.pipes.core.sentences.factory.create_component">eds.sentences</a>"</span><span class="p">)</span>
<span class="n">nlp</span><span class="o">.</span><span class="n">add_pipe</span><span class="p">(</span><span class="s2">"<a href="../tables/#edsnlp.pipes.misc.tables.factory.create_component">eds.tables</a>"</span><span class="p">)</span>
<span class="n">nlp</span><span class="o">.</span><span class="n">add_pipe</span><span class="p">(</span>
    <span class="s2">"<a href="#edsnlp.pipes.misc.quantities.factory.create_component">eds.quantities</a>"</span><span class="p">,</span>
    <span class="n">config</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
        <span class="n">quantities</span><span class="o">=</span><span class="s2">"all"</span><span class="p">,</span> <span class="n">extract_ranges</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">use_tables</span><span class="o">=</span><span class="kc">True</span>  <span class="c1"># (3)  # (1)</span>
    <span class="p">),</span>  <span class="c1"># (2)</span>
<span class="p">)</span>
<span class="n">nlp</span><span class="p">(</span><span class="n">text</span><span class="p">)</span><span class="o">.</span><span class="n">spans</span><span class="p">[</span><span class="s2">"quantities"</span><span class="p">]</span>
<span class="c1"># Out: [65, 1.75, 3mmol/l, 100mPa-110mPa, 12h13]</span>
</code></pre></div> <ol> <li>100-110mg, 2 à 4 jours ...</li> <li>If True <code><a href="../tables/#edsnlp.pipes.misc.tables.factory.create_component">eds.tables</a></code> must be called</li> <li>All units from <a href="#edsnlp.pipes.misc.quantities.factory.create_component--availability">Availability</a> will be detected</li> </ol> </div> <div class="tabbed-block"> <div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">edsnlp</span>

<span class="n">nlp</span> <span class="o">=</span> <span class="n">edsnlp</span><span class="o">.</span><span class="n">blank</span><span class="p">(</span><span class="s2">"eds"</span><span class="p">)</span>
<span class="n">nlp</span><span class="o">.</span><span class="n">add_pipe</span><span class="p">(</span><span class="s2">"<a href="../../core/sentences/#edsnlp.pipes.core.sentences.factory.create_component">eds.sentences</a>"</span><span class="p">)</span>
<span class="n">nlp</span><span class="o">.</span><span class="n">add_pipe</span><span class="p">(</span><span class="s2">"<a href="../tables/#edsnlp.pipes.misc.tables.factory.create_component">eds.tables</a>"</span><span class="p">)</span>
<span class="n">nlp</span><span class="o">.</span><span class="n">add_pipe</span><span class="p">(</span>
    <span class="s2">"<a href="#edsnlp.pipes.misc.quantities.factory.create_component">eds.quantities</a>"</span><span class="p">,</span>
    <span class="n">config</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
        <span class="n">quantities</span><span class="o">=</span><span class="p">{</span>
            <span class="s2">"concentration"</span><span class="p">:</span> <span class="p">{</span><span class="s2">"unit"</span><span class="p">:</span> <span class="s2">"mol_per_l"</span><span class="p">},</span>
            <span class="s2">"pressure"</span><span class="p">:</span> <span class="p">{</span><span class="s2">"unit"</span><span class="p">:</span> <span class="s2">"Pa"</span><span class="p">},</span>
        <span class="p">},</span>  <span class="c1"># (3)</span>
        <span class="n">extract_ranges</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>  <span class="c1"># (1)</span>
        <span class="n">use_tables</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">),</span>  <span class="c1"># (2)</span>
<span class="p">)</span>
<span class="n">nlp</span><span class="p">(</span><span class="n">text</span><span class="p">)</span><span class="o">.</span><span class="n">spans</span><span class="p">[</span><span class="s2">"quantities"</span><span class="p">]</span>
<span class="c1"># Out: [3mmol/l, 100mPa-110mPa]</span>
</code></pre></div> <ol> <li>100-110mg, 2 à 4 jours ...</li> <li>If True <code><a href="../tables/#edsnlp.pipes.misc.tables.factory.create_component">eds.tables</a></code> must be called</li> <li>Which units are available ? See <a href="#edsnlp.pipes.misc.quantities.factory.create_component--availability">Availability</a>. More on customization ? See <a href="#edsnlp.pipes.misc.quantities.factory.create_component--customization">Customization</a></li> </ol> </div> <div class="tabbed-block"> <div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">edsnlp</span>

<span class="n">nlp</span> <span class="o">=</span> <span class="n">edsnlp</span><span class="o">.</span><span class="n">blank</span><span class="p">(</span><span class="s2">"eds"</span><span class="p">)</span>
<span class="n">nlp</span><span class="o">.</span><span class="n">add_pipe</span><span class="p">(</span><span class="s2">"<a href="../../core/sentences/#edsnlp.pipes.core.sentences.factory.create_component">eds.sentences</a>"</span><span class="p">)</span>
<span class="n">nlp</span><span class="o">.</span><span class="n">add_pipe</span><span class="p">(</span><span class="s2">"<a href="../tables/#edsnlp.pipes.misc.tables.factory.create_component">eds.tables</a>"</span><span class="p">)</span>
<span class="n">nlp</span><span class="o">.</span><span class="n">add_pipe</span><span class="p">(</span>
    <span class="s2">"<a href="#edsnlp.pipes.misc.quantities.factory.create_component">eds.quantities</a>"</span><span class="p">,</span>
    <span class="n">config</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
        <span class="n">quantities</span><span class="o">=</span><span class="p">[</span><span class="s2">"weight"</span><span class="p">,</span> <span class="s2">"size"</span><span class="p">],</span>  <span class="c1"># (3)</span>
        <span class="n">extract_ranges</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>  <span class="c1"># (1)</span>
        <span class="n">use_tables</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">),</span>  <span class="c1"># (2)</span>
<span class="p">)</span>
<span class="n">nlp</span><span class="p">(</span><span class="n">text</span><span class="p">)</span><span class="o">.</span><span class="n">spans</span><span class="p">[</span><span class="s2">"quantities"</span><span class="p">]</span>
<span class="c1"># Out: [65, 1.75]</span>
</code></pre></div> <ol> <li>100-110mg, 2 à 4 jours ...</li> <li>If True <code><a href="../tables/#edsnlp.pipes.misc.tables.factory.create_component">eds.tables</a></code> must be called</li> <li>Which quantities are available ? See <a href="#edsnlp.pipes.misc.quantities.factory.create_component--availability">Availability</a></li> </ol> </div> </div> </div> </details> <details class="scope" open=""> <summary>Scope</summary> <p>The <code><a href="#edsnlp.pipes.misc.quantities.factory.create_component">eds.quantities</a></code> matcher can extract simple (e.g. <code>3cm</code>) quantities. It can also detect elliptic enumerations (eg <code>32, 33 et 34kg</code>) of quantities of the same type and split the quantities accordingly.</p> <p>The normalized value can then be accessed via the <code>span._.{measure_name}</code> attribute, for instance <code>span._.size</code> or <code>span._.weight</code> and be converted on the fly to a desired unit. Like for other components, the <code>span._.value</code> extension can also be used to access the normalized value for any quantity span.</p> <p>See Availability section for details on which units are handled</p> </details><h2 id="edsnlp.pipes.misc.quantities.factory.create_component--examples">Examples</h2> <div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">edsnlp</span><span class="o">,</span><span class="w"> </span><span class="nn">edsnlp.pipes</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">eds</span>

<span class="n">nlp</span> <span class="o">=</span> <span class="n">edsnlp</span><span class="o">.</span><span class="n">blank</span><span class="p">(</span><span class="s2">"eds"</span><span class="p">)</span>
<span class="n">nlp</span><span class="o">.</span><span class="n">add_pipe</span><span class="p">(</span>
    <a href="#edsnlp.pipes.misc.quantities.factory.create_component">eds.quantities</a><span class="p">(</span>
        <span class="n">quantities</span><span class="o">=</span><span class="p">[</span><span class="s2">"size"</span><span class="p">,</span> <span class="s2">"weight"</span><span class="p">,</span> <span class="s2">"bmi"</span><span class="p">],</span>
        <span class="n">extract_ranges</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">),</span>
<span class="p">)</span>

<span class="n">text</span> <span class="o">=</span> <span class="s2">"""</span>
<span class="s2">Le patient est admis hier, fait 1m78 pour 76kg.</span>
<span class="s2">Les deux nodules bénins sont larges de 1,2 et 2.4mm.</span>
<span class="s2">BMI: 24.</span>

<span class="s2">Le nodule fait entre 1 et 1.5 cm</span>
<span class="s2">"""</span>

<span class="n">doc</span> <span class="o">=</span> <span class="n">nlp</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>

<span class="n">quantities</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">spans</span><span class="p">[</span><span class="s2">"quantities"</span><span class="p">]</span>

<span class="n">quantities</span>
<span class="c1"># Out: [1m78, 76kg, 1,2, 2.4mm, 24, entre 1 et 1.5 cm]</span>

<span class="n">quantities</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="c1"># Out: 1m78</span>

<span class="nb">str</span><span class="p">(</span><span class="n">quantities</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">_</span><span class="o">.</span><span class="n">size</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">quantities</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">_</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
<span class="c1"># Out: ('1.78 m', '1.78 m')</span>

<span class="n">quantities</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">_</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">cm</span>
<span class="c1"># Out: 178.0</span>

<span class="n">quantities</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<span class="c1"># Out: 1,2</span>

<span class="nb">str</span><span class="p">(</span><span class="n">quantities</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">_</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
<span class="c1"># Out: '1.2 mm'</span>

<span class="nb">str</span><span class="p">(</span><span class="n">quantities</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">_</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">mm</span><span class="p">)</span>
<span class="c1"># Out: 1.2</span>

<span class="n">quantities</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
<span class="c1"># Out: 24</span>

<span class="nb">str</span><span class="p">(</span><span class="n">quantities</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">.</span><span class="n">_</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
<span class="c1"># Out: '24 kg_per_m2'</span>

<span class="nb">str</span><span class="p">(</span><span class="n">quantities</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">.</span><span class="n">_</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">kg_per_m2</span><span class="p">)</span>
<span class="c1"># Out: 24</span>

<span class="nb">str</span><span class="p">(</span><span class="n">quantities</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span><span class="o">.</span><span class="n">_</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
<span class="c1"># Out: 1-1.5 cm</span>
</code></pre></div> <p>To extract all sizes in centimeters, and average range quantities, you can use the following snippet:</p> <div class="highlight"><pre><span></span><code><span class="n">sizes</span> <span class="o">=</span> <span class="p">[</span>
    <span class="nb">sum</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">cm</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">m</span><span class="o">.</span><span class="n">_</span><span class="o">.</span><span class="n">value</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">_</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">doc</span><span class="o">.</span><span class="n">spans</span><span class="p">[</span><span class="s2">"quantities"</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">m</span><span class="o">.</span><span class="n">label_</span> <span class="o">==</span> <span class="s2">"size"</span>
<span class="p">]</span>
<span class="n">sizes</span>
<span class="c1"># Out: [178.0, 0.12, 0.24, 1.25]</span>
</code></pre></div> <p>To extract the quantities from many texts, you can use the following snippet:</p> <div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">edsnlp</span><span class="o">,</span><span class="w"> </span><span class="nn">edsnlp.pipes</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">eds</span>

<span class="n">nlp</span> <span class="o">=</span> <span class="n">edsnlp</span><span class="o">.</span><span class="n">blank</span><span class="p">(</span><span class="s2">"eds"</span><span class="p">)</span>
<span class="n">nlp</span><span class="o">.</span><span class="n">add_pipe</span><span class="p">(</span>
    <a href="#edsnlp.pipes.misc.quantities.factory.create_component">eds.quantities</a><span class="p">(</span><span class="n">quantities</span><span class="o">=</span><span class="s2">"weight"</span><span class="p">,</span> <span class="n">extract_ranges</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">as_ents</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
<span class="p">)</span>
<span class="n">texts</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"Le patient mesure 40000,0 g (aussi noté 40 kg)"</span><span class="p">]</span>
<span class="n">docs</span> <span class="o">=</span> <span class="n">edsnlp</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">from_iterable</span><span class="p">(</span><span class="n">texts</span><span class="p">)</span>
<span class="n">docs</span> <span class="o">=</span> <span class="n">docs</span><span class="o">.</span><span class="n">map_pipeline</span><span class="p">(</span><span class="n">nlp</span><span class="p">)</span>
<span class="n">docs</span><span class="o">.</span><span class="n">to_pandas</span><span class="p">(</span>
    <span class="n">converter</span><span class="o">=</span><span class="s2">"ents"</span><span class="p">,</span>
    <span class="n">span_attributes</span><span class="o">=</span><span class="p">[</span><span class="s2">"value.unit"</span><span class="p">,</span> <span class="s2">"value.kg"</span><span class="p">],</span>
<span class="p">)</span>
<span class="c1">#   note_id  start  end   label lexical_variant span_type original_unit    kg</span>
<span class="c1"># 0    None     18   27  weight       40000,0 g      ents             g  40.0</span>
<span class="c1"># 1    None     40   45  weight           40 kg      ents            kg  40.0</span>
</code></pre></div> <details class="available-units-and-quantities" open=""> <summary>Available units and quantities</summary> <p>Feel free to propose any missing raw unit or predefined quantity.</p> <p>Raw units and their derivations (g, mg, mgr ...) and their compositions (g/ml, cac/j ...) can be detected.</p> <p><strong>Available raw units :</strong></p> <p><code>g, m, m2, m3, mol, ui, Pa, %, log, mmHg, s/min/h/d/w/m/y, arc-second, °, °C, cac, goutte, l, x10*4, x10*5</code></p> <p><strong>Available predefined quantities :</strong></p> <table> <thead> <tr> <th>quantity_name</th> <th>Example</th> </tr> </thead> <tbody> <tr> <td><code>size</code></td> <td><code>1m50</code>, <code>1.50m</code>...</td> </tr> <tr> <td><code>weight</code></td> <td><code>1kg</code>, <code>Poids : 65</code>...</td> </tr> <tr> <td><code>bmi</code></td> <td><code>BMI: 24</code>, <code>24 kg.m-2</code></td> </tr> <tr> <td><code>volume</code></td> <td><code>2 cac</code>, <code>8ml</code>...</td> </tr> </tbody> </table> <p>See the <a href="https://github.com/aphp/edsnlp/blob/master/edsnlp/pipes/misc/quantities/patterns.py">patterns</a> for exhaustive definition.</p> </details> <details class="customization" open=""> <summary>Customization</summary> <p>You can declare custom quantities by altering the patterns:</p> <div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">edsnlp</span><span class="o">,</span><span class="w"> </span><span class="nn">edsnlp.pipes</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">eds</span>

<span class="n">nlp</span> <span class="o">=</span> <span class="n">edsnlp</span><span class="o">.</span><span class="n">blank</span><span class="p">(</span><span class="s2">"eds"</span><span class="p">)</span>
<span class="n">nlp</span><span class="o">.</span><span class="n">add_pipe</span><span class="p">(</span>
    <a href="#edsnlp.pipes.misc.quantities.factory.create_component">eds.quantities</a><span class="p">(</span>
        <span class="n">quantities</span><span class="o">=</span><span class="p">{</span>
            <span class="s2">"my_custom_surface_quantity"</span><span class="p">:</span> <span class="p">{</span>
                <span class="c1"># This quantity unit is homogenous to square meters</span>
                <span class="s2">"unit"</span><span class="p">:</span> <span class="s2">"m2"</span><span class="p">,</span>
                <span class="c1"># Handle cases like "surface: 1.8" (implied m2),</span>
                <span class="c1"># vs "surface: 50" (implied cm2)</span>
                <span class="s2">"unitless_patterns"</span><span class="p">:</span> <span class="p">[</span>
                    <span class="p">{</span>
                        <span class="s2">"terms"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"surface"</span><span class="p">,</span> <span class="s2">"aire"</span><span class="p">],</span>
                        <span class="s2">"ranges"</span><span class="p">:</span> <span class="p">[</span>
                            <span class="p">{</span><span class="s2">"unit"</span><span class="p">:</span> <span class="s2">"m2"</span><span class="p">,</span> <span class="s2">"min"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">"max"</span><span class="p">:</span> <span class="mi">9</span><span class="p">},</span>
                            <span class="p">{</span><span class="s2">"unit"</span><span class="p">:</span> <span class="s2">"cm2"</span><span class="p">,</span> <span class="s2">"min"</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s2">"max"</span><span class="p">:</span> <span class="mi">100</span><span class="p">},</span>
                        <span class="p">],</span>
                    <span class="p">}</span>
                <span class="p">],</span>
            <span class="p">},</span>
        <span class="p">}</span>
    <span class="p">),</span>
<span class="p">)</span>
</code></pre></div> </details> <details class="extensions" open=""> <summary>Extensions</summary> <p>The <code><a href="#edsnlp.pipes.misc.quantities.factory.create_component">eds.quantities</a></code> pipeline declares its extensions dynamically, depending on the <code>quantities</code> parameter: each quantity gets its own extension, and is assigned to a different span group.</p> </details><h2 id="edsnlp.pipes.misc.quantities.factory.create_component--parameters">Parameters</h2> <table> <thead> <tr> <th><b>PARAMETER</b></th> <th><b>DESCRIPTION</b></th> </tr> </thead> <tbody> <tr> <td><code>nlp</code></td> <td class="doc-param-details"> <p>The pipeline object</p> <p> <span class="doc-param-annotation"> <b>TYPE:</b> <code><span title="edsnlp.core.PipelineProtocol">PipelineProtocol</span></code> </span> </p> </td> </tr> <tr> <td><code>name</code></td> <td class="doc-param-details"> <p>The name of the component.</p> <p> <span class="doc-param-annotation"> <b>TYPE:</b> <code><span title="str">str</span></code> </span> <span class="doc-param-default"> <b>DEFAULT:</b> <code>'quantities'</code> </span> </p> </td> </tr> <tr> <td><code>quantities</code></td> <td class="doc-param-details"> <p>A mapping from measure names to MsrConfig Each measure's configuration has the following shape: <div class="no-check highlight"><pre><span></span><code><span class="p">{</span>
  <span class="c1"># the unit (e.g. "kg"),</span>
  <span class="s2">"unit"</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
  <span class="s2">"unitless_patterns"</span><span class="p">:</span> <span class="p">{</span>
    <span class="c1"># preceding trigger terms</span>
    <span class="s2">"terms"</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
    <span class="c1"># unitless ranges -&gt; unit patterns</span>
    <span class="s2">"ranges"</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span>
      <span class="p">{</span><span class="s2">"min"</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="s2">"max"</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="s2">"unit"</span><span class="p">:</span> <span class="nb">str</span><span class="p">},</span>
      <span class="p">{</span><span class="s2">"min"</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="s2">"unit"</span><span class="p">:</span> <span class="nb">str</span><span class="p">},</span>
      <span class="o">...</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="o">...</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div> Set <code>quantities="all"</code> to extract all raw quantities from units_config file.</p> <p> <span class="doc-param-annotation"> <b>TYPE:</b> <code><span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="typing.List">List</span>[<span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="edsnlp.pipes.misc.quantities.quantities.MsrConfig">MsrConfig</span>]], <span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="edsnlp.pipes.misc.quantities.quantities.MsrConfig">MsrConfig</span>]]</code> </span> <span class="doc-param-default"> <b>DEFAULT:</b> <code>['weight', 'size', 'bmi', 'volume']</code> </span> </p> </td> </tr> <tr> <td><code>number_terms</code></td> <td class="doc-param-details"> <p>A mapping of numbers to their lexical variants</p> <p> <span class="doc-param-annotation"> <b>TYPE:</b> <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.List">List</span>[<span title="str">str</span>]]</code> </span> <span class="doc-param-default"> <b>DEFAULT:</b> <code>{'0.125': ['⅛'], '0.16666666': ['⅙'], '0.2': ['...</code> </span> </p> </td> </tr> <tr> <td><code>stopwords</code></td> <td class="doc-param-details"> <p>A list of stopwords that do not matter when placed between a unitless trigger and a number</p> <p> <span class="doc-param-annotation"> <b>TYPE:</b> <code><span title="typing.List">List</span>[<span title="str">str</span>]</code> </span> <span class="doc-param-default"> <b>DEFAULT:</b> <code>['par', 'sur', 'de', 'a', ',', 'et', '-', 'à']</code> </span> </p> </td> </tr> <tr> <td><code>unit_divisors</code></td> <td class="doc-param-details"> <p>A list of terms used to divide two units (like: m / s)</p> <p> <span class="doc-param-annotation"> <b>TYPE:</b> <code><span title="typing.List">List</span>[<span title="str">str</span>]</code> </span> <span class="doc-param-default"> <b>DEFAULT:</b> <code>['/', 'par']</code> </span> </p> </td> </tr> <tr> <td><code>attr</code></td> <td class="doc-param-details"> <p>Whether to match on the text ('TEXT') or on the normalized text ('NORM')</p> <p> <span class="doc-param-annotation"> <b>TYPE:</b> <code><span title="str">str</span></code> </span> <span class="doc-param-default"> <b>DEFAULT:</b> <code>NORM</code> </span> </p> </td> </tr> <tr> <td><code>ignore_excluded</code></td> <td class="doc-param-details"> <p>Whether to exclude pollution patterns when matching in the text</p> <p> <span class="doc-param-annotation"> <b>TYPE:</b> <code><span title="bool">bool</span></code> </span> <span class="doc-param-default"> <b>DEFAULT:</b> <code>True</code> </span> </p> </td> </tr> <tr> <td><code>compose_units</code></td> <td class="doc-param-details"> <p>Whether to compose units (like "m/s" or "m.s-1")</p> <p> <span class="doc-param-annotation"> <b>TYPE:</b> <code><span title="bool">bool</span></code> </span> <span class="doc-param-default"> <b>DEFAULT:</b> <code>True</code> </span> </p> </td> </tr> <tr> <td><code>extract_ranges</code></td> <td class="doc-param-details"> <p>Whether to extract ranges (like "entre 1 et 2 cm")</p> <p> <span class="doc-param-annotation"> <b>TYPE:</b> <code><span title="bool">bool</span></code> </span> <span class="doc-param-default"> <b>DEFAULT:</b> <code>False</code> </span> </p> </td> </tr> <tr> <td><code>range_patterns</code></td> <td class="doc-param-details"> <p>A list of "{FROM} xx {TO} yy" patterns to match range quantities</p> <p> <span class="doc-param-annotation"> <b>TYPE:</b> <code><span title="typing.List">List</span>[<span title="typing.Tuple">Tuple</span>[<span title="typing.Optional">Optional</span>[<span title="str">str</span>], <span title="typing.Optional">Optional</span>[<span title="str">str</span>]]]</code> </span> <span class="doc-param-default"> <b>DEFAULT:</b> <code>[('De', 'à'), ('De', 'a'), ('de', 'à'), ('de', ...</code> </span> </p> </td> </tr> <tr> <td><code>after_snippet_limit</code></td> <td class="doc-param-details"> <p>Maximum word distance after to link a part of a quantity after its number</p> <p> <span class="doc-param-annotation"> <b>TYPE:</b> <code><span title="int">int</span></code> </span> <span class="doc-param-default"> <b>DEFAULT:</b> <code>6</code> </span> </p> </td> </tr> <tr> <td><code>before_snippet_limit</code></td> <td class="doc-param-details"> <p>Maximum word distance after to link a part of a quantity before its number</p> <p> <span class="doc-param-annotation"> <b>TYPE:</b> <code><span title="int">int</span></code> </span> <span class="doc-param-default"> <b>DEFAULT:</b> <code>10</code> </span> </p> </td> </tr> <tr> <td><code>span_setter</code></td> <td class="doc-param-details"> <p>How to set the spans in the document. By default, each quantity will be assigned to its own span group (using either the "name" field of the config, or the key if you passed a dict), and to the "quantities" group.</p> <p> <span class="doc-param-annotation"> <b>TYPE:</b> <code><span title="typing.Optional">Optional</span>[<a class="autorefs autorefs-internal" href="../../ner/#edsnlp.pipes.base.SpanSetterArg" title="Span setters: where are stored extracted entities ? (edsnlp.pipes.base.SpanSetterArg)">SpanSetterArg</a>]</code> </span> <span class="doc-param-default"> <b>DEFAULT:</b> <code>None</code> </span> </p> </td> </tr> <tr> <td><code>span_getter</code></td> <td class="doc-param-details"> <p>Where to look for quantities in the doc. By default, look in the whole doc. You can combine this with the <code>merge_mode</code> argument for interesting results.</p> <p> <span class="doc-param-annotation"> <b>TYPE:</b> <code><a class="autorefs autorefs-internal" href="../../qualifiers/#edsnlp.pipes.base.SpanGetterArg" title="Where do we get our spans ? (edsnlp.pipes.base.SpanGetterArg)">SpanGetterArg</a></code> </span> <span class="doc-param-default"> <b>DEFAULT:</b> <code>None</code> </span> </p> </td> </tr> <tr> <td><code>merge_mode</code></td> <td class="doc-param-details"> <p>How to merge matches with the spans from <code>span_getter</code>, if given:</p> <ul> <li><code>intersect</code>: return only the matches that fall in the <code>span_getter</code> spans</li> <li><code>align</code>: if a match overlaps a span from <code>span_getter</code> (e.g. a match extracted by a machine learning model), return the <code>span_getter</code> span instead, and assign all the parsed information (<code>._.date</code> / <code>._.duration</code>) to it. Otherwise, don't return the date.</li> </ul> <p> <span class="doc-param-annotation"> <b>TYPE:</b> <code><span title="typing_extensions.Literal">Literal</span>['intersect', 'align']</code> </span> <span class="doc-param-default"> <b>DEFAULT:</b> <code>intersect</code> </span> </p> </td> </tr> </tbody> </table> <details class="authors-and-citation" open=""> <summary>Authors and citation</summary> <p>The <code><a href="#edsnlp.pipes.misc.quantities.factory.create_component">eds.quantities</a></code> pipeline was developed by AP-HP's Data Science team.</p> </details> </div> </div> <div class="footnote"><hr/><ol></ol></div> <script async="" crossorigin="anonymous" data-category="Announcements" data-category-id="DIC_kwDOG97JnM4CkS1h" data-emit-metadata="0" data-input-position="bottom" data-lang="en" data-mapping="title" data-reactions-enabled="1" data-repo="aphp/edsnlp" data-repo-id="R_kgDOG97JnA" data-strict="0" data-theme="https://aphp.github.io/edsnlp/master/assets/stylesheets/giscus_light.css" loading="lazy" src="https://giscus.app/client.js">
</script> <script>
    var giscus = document.querySelector("script[src*=giscus]")

    // Set palette on initial load
    var palette = __md_get("__palette")
    if (palette && typeof palette.color === "object") {
        var theme = palette.color.scheme === "slate"
            ? "https://aphp.github.io/edsnlp/master/assets/stylesheets/giscus_dark.css"
            : "https://aphp.github.io/edsnlp/master/assets/stylesheets/giscus_light.css"

        // Instruct Giscus to set theme
        giscus.setAttribute("data-theme", theme)
    }

    // Register event handlers after documented loaded
    document.addEventListener("DOMContentLoaded", function () {
        var ref = document.querySelector("[data-md-component=palette]")
        ref.addEventListener("change", function () {
            var palette = __md_get("__palette")
            if (palette && typeof palette.color === "object") {
                var theme = palette.color.scheme === "slate"
                    ? "https://aphp.github.io/edsnlp/master/assets/stylesheets/giscus_dark.css"
                    : "https://aphp.github.io/edsnlp/master/assets/stylesheets/giscus_light.css"

                // Instruct Giscus to change theme
                var frame = document.querySelector(".giscus-frame")
                frame.contentWindow.postMessage(
                    {giscus: {setConfig: {theme}}},
                    "https://giscus.app"
                )
            }
        })
    })
</script> </article> </div> </div> <button class="md-top md-icon" data-md-component="top" hidden="" type="button"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"></path></svg> Back to top </button> </main> <footer class="md-footer"> <nav aria-label="Footer" class="md-footer__inner md-grid"> <a aria-label="Previous: Dates" class="md-footer__link md-footer__link--prev" href="../dates/" rel="prev"> <div class="md-footer__button md-icon"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg> </div> <div class="md-footer__title"> <span class="md-footer__direction"> Previous </span> <div class="md-ellipsis"> Dates </div> </div> </a> <a aria-label="Next: Consultation dates" class="md-footer__link md-footer__link--next" href="../consultation-dates/" rel="next"> <div class="md-footer__title"> <span class="md-footer__direction"> Next </span> <div class="md-ellipsis"> Consultation dates </div> </div> <div class="md-footer__button md-icon"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"></path></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class="md-copyright"> <div class="md-copyright__highlight"> Copyright © 2025 – Assistance Publique - Hôpitaux de Paris </div> Made with <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank"> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class="md-dialog" data-md-component="dialog"> <div class="md-dialog__inner md-typeset"></div> </div> <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tracking", "navigation.instant", "navigation.indexes", "navigation.prune", "navigation.top", "navigation.footer", "content.code.annotate", "content.code.copy", "announce.dismiss"], "search": "../../../assets/javascripts/workers/search.dfff1995.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"default": "latest", "provider": "mike"}}</script> <script src="../../../assets/javascripts/bundle.dff1b7c8.min.js"></script> <script pret-head-scripts=""></script> </body> </html>